const mongoose = require('mongoose');

const movieSchema = new mongoose.Schema({
    title: { 
        type: String, 
        required: true,
        minlength: 3,
        maxlength: 255, 
    },
    direction: {
        type: String,
        minlength: 3,
        maxlength: 255,
    },
    category: {
        type: Array,
        validate: {
            validator: function(v) {
                return v && v.length >0;
            },
            message: 'Film musi mieć jakąś kategorię'
        }
    },
    production: { type: String, validate: true},
    premiere: { type: Date},
    repertoire: {
        type: Array,

    }
});

const Movie = mongoose.model('Movie', movieSchema);

async function createMovie() {
const movie = new Movie({
    title: 'Psy',
    direction: 'Władysław Pasikowski',
    category: 'sensacyjny',
    producion: 'Polska',
    premiere: '1992-12-31'
});

    try {
        const result = await movie.save();
        console.log(result);
    }
    catch (ex) {
        console.log(ex.message)
    }
}

createMovie();